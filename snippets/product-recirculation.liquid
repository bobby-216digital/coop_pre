{% assign acf_product_recirculation_handles = product.metafields.accentuate.product_recirculation_pd | split: '|' %}

{% if acf_product_recirculation_handles.size > 0 %}
  <div class="relative py-40 lg:pt-80 lg:pl-80 bg-white">
    <div class="carousel swiper-container product-card-recirculation">
      <div class="flex justify-between items-center mb-40 pr-20 lg:pr-0">
        <h2 class="h4 pl-20 lg:pl-0 text-center">You Might Also Like</h2>
        {% unless acf_product_recirculation_handles.size <= 3 %}
          <div class="hidden lg:flex flex-row justify-between pr-80">
            <button title="Previous Button" type="button" class="swiper-button-prev flex justify-center items-center md:w-27 md:h-15">
              {% render 'icons', icon: 'arrow-prev' %}
            </button>
            <div class="fraction-pagination font-sansRegular label-md flex items-center w-auto mx-20"></div>
            <button title="Next Button" type="button" class="swiper-button-next flex justify-center items-center md:w-27 md:h-15">
              {% render 'icons', icon: 'arrow-next' %}
            </button>
          </div>
        {% endunless %}
      </div>
      
      <ul class="swiper-wrapper">
        {% for product_recirculation in acf_product_recirculation_handles limit: 10 %}
          {% assign all_product_recirculation = all_products[product_recirculation] %}
          <!-- Item -->
          {% render 'product-card', product: all_product_recirculation, class: 'swiper-slide', imageClass: 'object-cover' %}
        {% endfor %}
      </ul>
      {% unless acf_product_recirculation_handles.size <= 1 %}
        <div class="flex flex-row justify-between lg:hidden w-full mt-40 px-20">
          <button title="Previous Button" type="button" class="swiper-button-prev flex justify-center items-center md:w-27 md:h-15">
            {% render 'icons', icon: 'arrow-prev' %}
          </button>
          <div class="fraction-pagination font-sansRegular label-md flex items-center w-auto mx-20"></div>
          <button title="Next Button" type="button" class="swiper-button-next flex justify-center items-center md:w-27 md:h-15">
            {% render 'icons', icon: 'arrow-next' %}
          </button>
        </div>
      {% endunless %}
    </div>
  </div>
{% endif %}